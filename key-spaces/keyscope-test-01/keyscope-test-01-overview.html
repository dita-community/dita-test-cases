<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-us"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="copyright" content="(C) Copyright 2016"><meta name="DC.rights.owner" content="(C) Copyright 2016"><meta name="DC.Type" content="topic"><meta name="description" content="Verifies that keys defined on topicrefs that also specify keyscope are in the specified scope and not the parent scope."><meta name="DC.Relation" scheme="URI" content="../../key-spaces/key-spaces-tests.html"><meta name="DC.Format" content="XHTML"><meta name="DC.Identifier" content="topic_xgt_12n_cv"><link rel="stylesheet" type="text/css" href="../../commonltr.css"><title>Keyscope Test 01 Description</title></head><body id="topic_xgt_12n_cv"><main role="main"><article role="article" aria-labelledby="ariaid-title1">
  <h1 class="title topictitle1" id="ariaid-title1">Keyscope Test 01 Description</h1>
  
  <div class="body"><p class="shortdesc">Verifies that keys defined on topicrefs that also specify <code class="keyword markupname xmlatt">@keyscope</code> are
    in the specified scope and not the parent scope.</p>
    <section class="section"><h2 class="sectiontitle">Overview</h2>
      <div class="p">This map has two topicrefs. Each topicref defines both a key scope and a key name, with a
        reference to a unique
        topic:<pre class="pre codeblock"><code>  &lt;topicref id="tr-scope-01"
    keyscope="scope-01"
    keys="topic-01"
    href="topics/topic-01.dita"/&gt;
  &lt;topicref id="tr-scope-02"
    keyscope="scope-02"
    keys="topic-01"
    href="topics/topic-02.dita"
    /&gt;</code></pre></div>
      <div class="p">To refer to the key "topic-01" from outside the scope "scope-01", the correct key reference
        is "scope-01.topic-01", as used in the xref from
        <span class="ph filepath">topic-02.dita</span>:<pre class="pre codeblock"><code>&lt;xref keyref="scope-01.topic-01"/&gt;</code></pre></div>
      <p class="p">The topic <span class="ph filepath">topic-01.dita</span> has the equivalent qualified key reference to
          <span class="ph filepath">topic-02.dita</span> as used from topicref "tr-scope-02".</p>
    </section>
    <section class="section"><h2 class="sectiontitle">Expected Result</h2>
      <p class="p">The xref to key "scope-01.topic-01" should be resolved to topic-01.dita as used by topicref
        "tr-scope-01".</p>
    </section>
    <section class="section"><h2 class="sectiontitle">Relevant Specification Clauses</h2>
      <div class="p">The relevant spec language is in clause 2.3.4.2, Key Scopes (<a class="xref" href="http://docs.oasis-open.org/dita/dita/v1.3/os/part3-all-inclusive/archSpec/base/keyScopes.html" target="_blank">http://docs.oasis-open.org/dita/dita/v1.3/os/part3-all-inclusive/archSpec/base/keyScopes.html</a>):<blockquote class="lq">A
          key scope includes the following components: <ul class="ul" id="topic_xgt_12n_cv__ul_r2v_p2n_cv">
            <li class="li"><em class="ph i">The scope-defining element</em>
            </li>
            <li class="li">The elements that are contained by the scope-defining element, minus the elements
              that are contained by child key scopes </li>
            <li class="li">The elements that are referenced by the scope-defining element or its descendants,
              minus the elements that are contained by child key scopes</li>
          </ul><p class="p">(Italics added)</p></blockquote></div>
    </section>
    <section class="section"><h2 class="sectiontitle">Test Results</h2>
      <div class="table-frame-top-bottom"><table id="topic_xgt_12n_cv__table_t4w_rgn_cv" class="table expanse-column table-rules-topbot"><caption><span class="tablecap">Table 1. Test Results</span></caption><colgroup><col style="width:33.33333333333333%"><col style="width:33.33333333333333%"><col style="width:33.33333333333333%"></colgroup><thead class="thead" style="text-align:left;">
            <tr class="row">
              <th class="entry cellrowborder" style="text-align:left;vertical-align:top;" id="d529e97">Processor</th>
              <th class="entry cellrowborder" style="text-align:left;vertical-align:top;" id="d529e100">Test Result</th>
              <th class="entry row-nocellborder" style="text-align:left;vertical-align:top;" id="d529e103">Notes</th>
            </tr>
          </thead><tbody class="tbody">
            <tr class="row">
              <td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d529e97 ">Open Toolkit 2.2.2, XHTML transform</td>
              <td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d529e100 ">Correct result</td>
              <td class="entry row-nocellborder" style="text-align:left;vertical-align:top;" headers="d529e103 ">Incorrectly reports the key "topic-01" in scope "scope-02" as a
                duplicate.</td>
            </tr>
            <tr class="row">
              <td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d529e97 ">Open Toolkit 2.2.2, PDF transform</td>
              <td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d529e100 ">Correct result</td>
              <td class="entry row-nocellborder" style="text-align:left;vertical-align:top;" headers="d529e103 ">Incorrectly reports the key "topic-01" in scope "scope-02" as a
                duplicate.</td>
            </tr>
            <tr class="row">
              <td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d529e97 ">oXygenXML 17.1</td>
              <td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d529e100 ">Reports map as valid, resolves links correctly.</td>
              <td class="entry row-nocellborder" style="text-align:left;vertical-align:top;" headers="d529e103 ">&nbsp;</td>
            </tr>
            <tr class="row">
              <td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d529e97 ">XMetaL 10</td>
              <td class="entry cellrowborder" style="text-align:left;vertical-align:top;" headers="d529e100 ">Appears to resolve the key references in the editor but without regard to the
                scope context. In the re-used topic, it reflects the result of resolving the key
                reference in the scope of scope-01</td>
              <td class="entry row-nocellborder" style="text-align:left;vertical-align:top;" headers="d529e103 ">This seems to be a side effect of XMetaL using PIs to put the resolved link
                text in the XML source, rather than resolving the reference dynamically at
                presentation time.</td>
            </tr>
          </tbody></table></div>
    </section>
  </div>
<nav role="navigation" class="related-links"><div class="familylinks"><div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="../../key-spaces/key-spaces-tests.html">Key Space Tests</a></div></div></nav></article></main></body></html>