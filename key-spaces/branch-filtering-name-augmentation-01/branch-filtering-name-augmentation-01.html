<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-us"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Branch Filtering Name Augmentation Test 01</title><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="schema.DC" href="http://purl.org/dc/terms/"><meta name="DC.Type" content="topic"><meta name="description" content="Tests setting of effective key scope and resource names using branch filtering when there are nested scopes and topicrefs."><meta name="DC.Format" content="XHTML"><meta name="DC.Identifier" content="topic_ahb_v2n_cv"><script type="text/javascript">var d4p = {"relativePath":"..\/..\/","dev":false,"debug":false,"draft":false,"nextTopicHref":"key-spaces\/keyscope-test-01\/keyscope-test-01-overview.html","previousTopicHref":"key-spaces\/key-spaces-tests.html","ext":".html","root":false,"topic":{"chunked":""},"map":{"title":"Test Case Catalog","chunked":false},"search":{"minlength":2},"l":{"searchPageHeading":"Search Results","close":"Close"}}</script><link rel="stylesheet" type="text/css" media="screen, projection" href="../../themes/dita-d4p-classic/css/style.css"><link rel="stylesheet" type="text/css" media="screen, projection, print" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"><script type="text/javascript">
      
        d4p.cssGridPath = d4p.dev ? 'html5-themes/modules/960-Responsive-Grid/css/' : 'themes/dita-d4p-classic/css/';
        var ADAPT_CONFIG = {
          // Where is your CSS?
          path: d4p.relativePath + d4p.cssGridPath,
          
          // false = Only run once, when page first loads.
          // true = Change on window resize and page tilt.
          dynamic: true,
          
          // Optional callback... myCallback(i, width)
          callback: doc_resize,
          
          // First range entry is the minimum.
          // Last range entry is the maximum.
          // Separate ranges by "to" keyword.
          range: [
             // small (size-0)
            '0px    to 760px  = mobile.css',
             // medium (size-1, size-2)
            '760px  to 980px  = 720.css',
            '980px  to 1270px = 960.css',
             // large (size-3, size-5)
            '1270px to 1600px = 1200.css',
            '1600px to 1940px = 1560.css',
             // extra large (size-6)
            '1940px to 2540px = 1920.css',
            '2540px           = 2520.css'
          ]
        };

        function doc_resize(i, width)
        {
          d4p.setBodyClassfunction(i, width);
        }


        
      </script><script type="text/javascript" src="../../themes/dita-d4p-classic/js/script.js"></script></head><body class="en-us dita-d4p-classic centered navigation-default"><div id="d4h5-main-container" class="container_12" role="application"><header role="banner" aria-labelledby="publication-title" class="hide-for-small"><div class="grid_8"><h1 id="publication-title">Test Case Catalog</h1></div><section class="grid_4 search-box"><form id="search" role="search"><div class="form-group"><input id="search-text" type="text" autocomplete="off" class="form-control" placeholder="Search"></div></form></section><secion class="clearfix"></secion></header><div id="d4h5-section-container" class="grid_12"><nav id="local-navigation" class="grid_4 alpha omega" role="navigation" aria-label="Main navigation"><div id="nav-content"><ul><li><a href="../../index.html">Table of Contents</a></li><li class="collapsible active"><a href="../../test-case-catalog.html">Test Case Catalog</a><ul><li class="collapsible active"><a href="../key-spaces-tests.html">Key Space Tests</a><ul><li class=" active"><a href="branch-filtering-name-augmentation-01.html" class=" selected">Branch Filtering Name Augmentation Test 01</a></li><li><a href="../keyscope-test-01/keyscope-test-01-overview.html">Keyscope Test 01 Description</a></li></ul></li><li class="collapsible collapsed"><a href="../../this-topic-fragment-ids/this_topic_fragment_identifiers.html">This-Topic Fragment Identifiers</a><ul><li><a href="../../this-topic-fragment-ids/this-topic-fragment-ids-test-01.html">This-Topic Fragment ID Test 01</a></li></ul></li></ul></li></ul></div></nav><div id="d4h5-main-content" class="grid_8 alpha omega"><article><nav id="content-toolbar" class="toolbar hide-for-small"></nav><section id="page"><div><a id="topic_ahb_v2n_cv" class="anchor"></a> <h1 class="title topictitle1">Branch Filtering Name Augmentation Test 01</h1> <div class="body"><p class="shortdesc">Tests setting of effective key scope and resource names using branch filtering when there are nested scopes and topicrefs.</p> <div class="section" id="topic_ahb_v2n_cv-d457e11"><h2 class="sectiontitle">Overview</h2> <p class="p">Tests the effect of using <samp class="ph codeph">&lt;dvrKeyscopePrefix&gt;</samp> and <samp class="ph codeph">&lt;dvrResourcePrefix&gt;</samp> when there are nested key scopes.</p> <p class="p">The specification is potentially ambiguous about what the correct behavior is in this case for key scope prefixes and suffixes, in that it could be read as requiring that key scope prefixes and suffixes be propagated to descendant key scopes if you only look at the architecture specification. But if you look at the reference entry for <samp class="ph codeph">&lt;dvrKeyscopePrefix&gt;</samp> it makes it clearer that the prefix only applies the scope names on the filtered branch. That is also the only sensible behavior as otherwise qualified key references to scopes within the scope of the filtered branch would be impossible to author. (This feature also makes it clear that having nested filtered branches that both apply key scope qualifiers is probably not something you should do in practice unless you know exactly what you're doing and why).</p> <p class="p">This test case has two branches, one without a <samp class="ph codeph">@keyscope</samp> attribute and one that defines a <samp class="ph codeph">@keyscope</samp> attribute. In both branches there is a reference to a <samp class="ph codeph">&lt;ditavalref&gt;</samp> element that specifies a key scope prefix and a resource name prefix.</p> <p class="p">Within each branch is a child topicref that defines a <samp class="ph codeph">@keyscope</samp> of "child-01".</p> <p class="p">The question is: "What is the effective key scope of the child topicref following application of branch filtering rules?"</p> <p class="p">The key scope prefix is "ksPrefix-" in both branches.</p> <aside class="note note "><span class="title">Note:</span> This example is artificial in that it uses two different branches in order to have different <samp class="ph codeph">@keyscope</samp> values on the branches. Without different <samp class="ph codeph">@keyscope</samp> values you could have one branch with two <samp class="ph codeph">&lt;ditavalref&gt;</samp> elements.</aside> </div> <div class="section" id="topic_ahb_v2n_cv-d457e66"><h2 class="sectiontitle">Expected Results</h2> <p class="p">In both cases the effective key scope of the child scope should be "child-01" (that is, the parent scope's prefix should not be added to the child scope name.</p> </div> <div class="section" id="topic_ahb_v2n_cv-d457e72"><h2 class="sectiontitle">Relevant Specification Language</h2> <p class="p">The requirements for resource and key space name modification are defined in clause <a class="xref external" href="http://docs.oasis-open.org/dita/dita/v1.3/os/part3-all-inclusive/archSpec/base/branch-filtering-resource-names.html">2.4.4.4 Branch filtering: Impact on resource and key names</a>, as well as in <a class="xref external" href="http://docs.oasis-open.org/dita/dita/v1.3/os/part1-base/langRef/base/dvrKeyscopePrefix.html#dvrKeyscopePrefix">the reference entry for <samp class="ph codeph">&lt;dvrKeyscopeSuffix&gt;</samp></a>. </p> <div class="p">The relevant language in 2.4.4.4 is:<blockquote class="lq"> <dl class="dl"> <dt class="dt dlterm"><samp class="ph codeph">&lt;dvrKeyscopePrefix&gt;</samp></dt> <dd class="dd">Enables a map author to specify a prefix that is added to the start of key scope names for each key scope in the branch. If no key scope is specified for the branch, this can be used to establish a new key scope, optionally combined with a value specified in <samp class="ph codeph">&lt;dvrKeyscopeSuffix&gt;</samp>.</dd> </dl> </blockquote></div> <p class="p">Here, the phrase "each key scope in the branch" means "all the key scope names on the branch's @keyscope attribute, if specified", not "all the scope scopes descending from the branch".</p> <div class="p">And in 3.5.4.5 &lt;dvrKeyscopePrefix&gt;:<blockquote class="lq">For map branches that are implied by &lt;ditavalref&gt; elements, the value of the <samp class="ph codeph">&lt;dvrKeyscopePrefix&gt;</samp> element contributes to the effective key scope names of the branch. The effective key scope names start with the value of the <samp class="ph codeph">&lt;dvrKeyscopePrefix&gt;</samp> element. Note that if the branch as authored does not specify a <samp class="ph codeph">@keyscope</samp> value, specifying <samp class="ph codeph">&lt;dvrKeyscopePrefix&gt;</samp> (without also specifying <samp class="ph codeph">&lt;dvrKeyscopeSuffix&gt;</samp>) results in the branch establishing a key scope whose name is the value of the <samp class="ph codeph">&lt;dvrKeyscopePrefix&gt;</samp> element. The full key scope names also will reflect the value of a <samp class="ph codeph">&lt;dvrKeyscopeSuffix&gt;</samp> element if one is specified, regardless of whether the branch as authored specifies a <samp class="ph codeph">@keyscope</samp> value.</blockquote></div> <p class="p">This makes it clearer that the prefixes (and suffixes) only apply to the filtered branch and not descendant scope names.</p> </div> <div class="section" id="topic_ahb_v2n_cv-d457e145"><h2 class="sectiontitle">Test Results</h2> <p class="p">Describe the results of running the tests with different processors. Include the processor version and option details so that others can reproduce your tests.</p> <div class="tablenoborder"><table id="topic_ahb_v2n_cv__table_t4w_rgn_cv" class="table"><caption xmlns="http://www.w3.org/1999/xhtml"><span class="tablecap"><span class="tablecap">Test Results</span></span></caption> <thead class="thead" align="left"> <tr class="row"> <th class="entry" valign="top" width="33.66336633663366%" id="d457e167">Processor</th> <th class="entry" valign="top" width="33.003300330033%" id="d457e170">Test Result</th> <th class="entry" valign="top" width="33.33333333333333%" id="d457e173">Notes</th> </tr> </thead> <tbody class="tbody"> <tr class="row"> <td class="entry" valign="top" width="33.66336633663366%" headers="d457e167 ">DITA OT 2.2.3</td> <td class="entry" valign="top" width="33.003300330033%" headers="d457e170 ">Pass. All links are resolved to the correct locations.</td> <td class="entry" valign="top" width="33.33333333333333%" headers="d457e173 ">&nbsp;</td> </tr> <tr class="row"> <td class="entry" valign="top" width="33.66336633663366%" headers="d457e167 ">DITA OT 2.2.2</td> <td class="entry" valign="top" width="33.003300330033%" headers="d457e170 ">Fail: Only the link branch tr-branch-02 is resolved (the branch with the explicitly-specified <samp class="ph codeph">@keyscope</samp> attribute). The other links do not resolve.</td> <td class="entry" valign="top" width="33.33333333333333%" headers="d457e173 ">The 2.2.2 OT propagates keyscope prefixes to descendant scopes.<p class="p">The 2.2 2 OT does not use the prefix or suffix as the key scope when no @keyscope is specified.</p></td> </tr> <tr class="row"> <td class="entry" valign="top" width="33.66336633663366%" headers="d457e167 ">oxygenXML 18 beta build 2016031809</td> <td class="entry" valign="top" width="33.003300330033%" headers="d457e170 ">Pass: Key references are resolved correctly.<p class="p">Pass: Key reference creation dialog includes the augmented scope names as selection options for qualified key names.</p></td> <td class="entry" valign="top" width="33.33333333333333%" headers="d457e173 ">There's no obvious way for the editor to reflect the fact that a topic is used in two different scopes and that navigating to it as used in one scope is a different result than when navigating to it as used in another scope. Doing a "search references" on the re-used topic does correctly reflect the places where it is used.</td> </tr> <tr class="row"> <td class="entry" valign="top" width="33.66336633663366%" headers="d457e167 ">oXygenXML 17.1</td> <td class="entry" valign="top" width="33.003300330033%" headers="d457e170 ">Key references are not resolved: reports the keys as not defined.<p class="p">Key reference creation dialog does not reflect branch-filtering defined scopes, no way to select key reference to post-filtering key scopes.</p></td> <td class="entry" valign="top" width="33.33333333333333%" headers="d457e173 ">Looks like oXygenXML does not take branch filtering into account when constructing its key spaces.</td> </tr> <tr class="row"> <td class="entry" valign="top" width="33.66336633663366%" headers="d457e167 ">XMetaL 11</td> <td class="entry" valign="top" width="33.003300330033%" headers="d457e170 ">Fail: The key spaces shown in the Key Space Manager do not reflect the branch filtering prefixes.</td> <td class="entry" valign="top" width="33.33333333333333%" headers="d457e173 ">&nbsp;</td> </tr> <tr class="row"> <td class="entry" valign="top" width="33.66336633663366%" headers="d457e167 ">XMetaL 10</td> <td class="entry" valign="top" width="33.003300330033%" headers="d457e170 ">Fail: The key spaces shown in the Key Space Manager do not reflect the branch filtering prefixes.</td> <td class="entry" valign="top" width="33.33333333333333%" headers="d457e173 ">&nbsp;</td> </tr> </tbody> </table></div> </div> </div> <footer id="topicsNPLinks"><div id="footer_previous"><a href="../../key-spaces/key-spaces-tests.html" class="previous" rel="internal">Key Space Tests</a></div><div id="footer_next"><a href="../../key-spaces/keyscope-test-01/keyscope-test-01-overview.html" class="next" rel="internal">Keyscope Test 01 Description</a></div></footer></div></section></article><div class="clear"></div></div><div class="clearfix"></div></div><div class="clearfix"></div><div id="footer-container" class="grid_12"></div></div></body></html>